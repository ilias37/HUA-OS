##Άσκηση 2η (25 μονάδες)

Σκοπός της εργασίας είναι να δημιουργήσετε τον δικό σας φλοιό με όνομα mysh ο οποίος να παρέχει ένα σύνολο από επιλογές στο χρήστη. Οι κανόνες λειτουργίας του περιγράφονται παρακάτω.

Όταν θα ξεκινάει το πρόγραμμα θα βρίσκει τον συνδεδεμένο χρήστη και θα του εμφανίζει ένα prompt το οποίο θα περιλαμβάνει το όνομα χρήστη και τον τρέχοντα κατάλογο.

it22001:/home/it22001>

(user):(current-directory)>

Για να το πετύχετε αυτό μπορείτε να  χρησιμοποιήσετε την κλήση getlogin() και την κλήση getcwd(). Σε αυτό το περιβάλλον θα πρέπει να υποστηρίζονται οι εξής επιλογές:

    Να ξεκινάει πάντα στον home directory του συνδεδεμένου χρήστη. Να υποστηρίζει αλλαγή καταλόγου, με την chdir()
    ο χρήστης θα δίνει μια εντολή και αυτή θα εκτελείται. Αφού διαβάσει την εντολή, το πρόγραμμά σας θα χρησιμοποιεί τη fork(), για να δημιουργήσει μια καινούρια διεργασία-παιδί η οποία θα εκτελεί την εντολή του χρήστη. Η εκτέλεση της εντολής από τη διεργασία-παιδί θα γίνεται με τη χρήση μιας κλήσης της οικογένειας exec(). Η πατρική διεργασία θα περιμένει τη διεργασία-παιδί να τελειώσει την εκτέλεσή της (χρησιμοποιώντας μια wait() ή μια waitpid()).  Επιπλέον να τυπώνει το exit code της εντολής που εκτελέστηκε. Ύστερα, θα επιστρέφει στο prompt περιμένοντας τη νέα εντολή του χρήστη. Θα πρέπει να υποστηρίζονται εντολές με παραμέτρους και ορίσματα (να γίνεται tokenization και να περνάνε τα ορίσματα και οι παράμετροι στην exec που επιλέξατε).
    Όταν ξεκινάει το πρόγραμμα, να καταγράφονται όλα τα αποτελέσματα σε ένα log file όπου θα αναφέρονται:

    Η ώρα
    Το input του χρήστη

Τα log αρχεία να αποθηκεύονται στο αρχείο ~/.myshlog

    Αν ληφθεί σήμα SIGINT ή SIGTERM να ρωτάει το χρήστη αν όντως θέλει να τερματίσει το πρόγραμμα, και αν ναι, τότε να το τερματίζει.
    Να υποστηρίζει την εντολή mygrep <a_string> <a_file> η οποία να παίρνει σαν παράμετρο ένα αλφαριθμητικό και ένα αρχείο, και χρησιμοποιώντας 1 νήμα ανά γραμμή, να προσπαθεί να εμφανίσει τις γραμμές όπου βρέθηκε η ζητουμενη λέξη καθώς και το πόσες φορές βρέθηκε συνολικά. Μπορείτε να το υλοποιήσετε και σε ξεχωριστό αρχείο αν θέλετε.

Χρήσιμες κλήσεις συστήματος:

    fork(), exec(), open(), close(), read(), write(), dup(), dup2()
    pthread_create(), pthread_join(),pthread_mutex_lock/unlock
    wait(), waitpid()
    signal()

Μεθοδολογία Υλοποίησης:

    Ξεκινήστε να υλοποιήσετε ένα πρόγραμμα το οποίο θα ξεκινάει και θα τυπώνει το όνομα χρήστη και τον τρέχοντα κατάλογο.
    Φροντίστε να κάνετε τις κατάλληλες ανακατευθύνσεις ώστε να αποθηκεύετε την ημερομηνία και το input του χρήστη στο log αρχείο
    Σκεφτείτε πως θα υλοποιήσετε τις fork για κάθε input εντολή του χρήστη ώστε να μπορέσει να εκτελέσει την εντολή αυτή η νέα διεργασία και να επιστρέψει το exit code της στην αρχική διεργασία.
    Σκεφτείτε σε ποια σημεία χρειάζεται προστασία από ταυτόχρονες προσβάσεις για την αποφυγή race conditions. Χρειάζεται να χρησιμοποιήσουμε και σημαφόρους για την προστασία κατά την πρόσβαση στον fd;  Δικαιολογήστε την απάντησή σας  
    Φροντίστε να μην υπάρχουν διεργασίες zombie
